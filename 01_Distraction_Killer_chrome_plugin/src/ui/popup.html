<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Focusly</title>
    <link rel="stylesheet" href="styles/popup.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon"><img src="../../assets/icons/logo-35.png"></div>
                <h1 style="font-size: 1.3rem;">Focusly</h1>
            </div>
            <div class="status-indicator" id="statusIndicator">
                <span class="status-dot"></span>
                <span class="status-text">Inactive</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Session Setup -->
            <div class="session-setup" id="sessionSetup">
                <h2 style="color: grey;">Start Your Focus Session</h2>
                <div class="form-group">
                    <label for="sessionDuration">Focus Duration</label>
                    <select id="sessionDuration" class="duration-select">
                        <option value="25" style="color: grey;">25 minutes (Pomodoro)</option>
                        <option value="45" style="color: grey;">45 minutes</option>
                        <option value="60" style="color: grey;">1 hour</option>
                        <option value="90" style="color: grey;">1.5 hours</option>
                        <option value="120" style="color: grey;">2 hours</option>
                        <option value="custom" style="color: grey;">Custom</option>
                    </select>
                </div>
                
                <div class="form-group custom-duration" id="customDuration">
                    <label for="customMinutes">Custom Duration (minutes)</label>
                    <input type="number" id="customMinutes" min="5" max="480" placeholder="Enter minutes">
                </div>

                <div class="form-group">
                    <label for="focusGoal">Focus Goal (optional)</label>
                    <input type="text" id="focusGoal" placeholder="What are you working on?">
                </div>

                <div class="start-session-container">
                    <button id="startSession" class="start-session-btn">
                        üöÄ Start Session
                    </button>
                </div>
            </div>

            <!-- Active Session -->
            <div class="active-session" id="activeSession">
                <div class="session-header">
                    <h2>Deep Work in Progress</h2>
                    <p class="goal-display" id="goalDisplay">Working on important tasks</p>
                </div>

                <div class="timer-section">
                    <div class="timer-circle">
                        <svg class="timer-svg" width="120" height="120">
                            <circle cx="60" cy="60" r="45" stroke="#e2e8f0" stroke-width="8" fill="transparent"/>
                            <circle cx="60" cy="60" r="45" stroke="#7A9E9F" stroke-width="8" fill="transparent"
                                    stroke-dasharray="283" stroke-dashoffset="283" id="timerProgress" class="timer-progress"/>
                        </svg>
                        <div class="timer-text">
                            <span class="time-remaining" id="timeRemaining">25:00</span>
                        </div>
                    </div>
                </div>

                <div class="session-stats">
                    <div class="stat">
                        <span class="stat-value" id="blockedAttempts">0</span>
                        <span class="stat-label">Blocked</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="focusScore">100%</span>
                        <span class="stat-label">Focus</span>
                    </div>
                </div>

                <div class="session-actions">
                    <button class="action-btn secondary" id="pauseSession">‚è∏Ô∏è Pause</button>
                    <button class="action-btn danger" id="stopSession">‚èπÔ∏è Stop</button>
                </div>
            </div>

            <!-- Session Complete -->
            <div class="session-complete" id="sessionComplete">
                <div class="completion-header">
                    <h2>üéâ Great Work!</h2>
                    <p>You've completed your deep work session</p>
                </div>

                <div class="completion-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="totalTime">25:00</span>
                        <span class="stat-label">Total Time</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="blockedTotal">0</span>
                        <span class="stat-label">Distractions Blocked</span>
                    </div>
                </div>

                <div class="session-actions">
                    <button class="action-btn primary" id="startNewSession">üîÑ Start New Session</button>
                    <button class="action-btn secondary" id="viewReport">üìä View Report</button>
                </div>
            </div>

            <!-- Gamification Progress -->
            <div class="gamification-section" id="gamificationSection" style="margin-top:12px; padding:8px;">
                <h2 class="gamification-title" style="font-size:1rem; margin-bottom:6px;">
                    üéØ Focus Score
                </h2>
                <div class="progress-stats" style="margin-bottom:0;">
                    <div class="progress-item" style="min-width:0;">
                        <span class="progress-value" id="totalPoints" style="font-size:1.2rem;">0</span>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-buttons">
                <button class="footer-btn" id="viewReports">üìä Reports</button>
                <button class="footer-btn" id="settings">‚öôÔ∏è Settings</button>
                <button class="footer-btn" id="help">‚ùì Help</button>
            </div>
        </footer>
    </div>

    <script src="../core/gamification.js"></script>
    <script src="theme-manager.js"></script>
    <script src="popup.js"></script>
</body>
</html>